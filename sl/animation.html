<!DOCTYPE html>
<html lang="sl">
<head>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Animacija in oblikovanje – Eva Margon</title>

  <style>
    body{
      margin: 0;
      font-family: 'Rubik', sans-serif;
      background: #fff;
      color: #222;
    }

    header{
      display:flex;
      align-items:center;
      padding:20px;
      border-bottom:1px solid #ddd;
      background:#fff;
    }

    header img.icon{
      width:60px;
      height:60px;
      margin-right:15px;
    }

    header h1{
      font-size:1.8rem;
      margin:0;
      font-weight: 600;
      letter-spacing: 0.01em;
    }

    /* ===== GALERIJA ===== */
    .grid-gallery{
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 22px;
      padding: 50px 24px 24px;
      max-width: 1600px;
      margin: 0 auto;
    }

    @media (max-width: 900px){
      .grid-gallery{
        grid-template-columns: repeat(2, 1fr);
        column-gap: 12px;
        row-gap: 14px;
        padding: 18px 20px 20px;
        max-width: 600px;
      }
    }

    @media (max-width: 420px){
      .grid-gallery{
        column-gap: 10px;
        row-gap: 12px;
        padding: 12px 20px 18px;
        max-width: 480px;
      }
    }

    /* ===== PROJEKT = BUTTON ===== */
    .project-card{
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;

      background: transparent;
      border: 0;
      padding: 0;
      cursor: pointer;
    }

    .project-card:focus{ outline: none; }
    .project-card:focus-visible{
      outline: 2px solid #111;
      outline-offset: 3px;
    }

    /* “play” ikonca */
    .project-card::after{
      content: "";
      position: absolute;
      inset: 0;
      background: url("../assets/images/icon-play.png") center center no-repeat;
      background-size: 72px 72px;
      opacity: 0.88;
      pointer-events: none;
      transition: transform 0.18s ease, opacity 0.18s ease;
    }

    @media (max-width: 900px){
      .project-card::after{
        background-size: 56px 56px;
      }
    }

    @media (hover: hover){
      .project-card:hover::after{
        opacity: 1;
        transform: scale(1.06);
      }
    }

    .project-inner{
      width: 92%;
      height: 92%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @media (max-width: 900px){
      .project-inner{ width: 100%; height: 100%; }
    }

    .project-inner img{
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      display: block;
      border-radius: 0;
    }

    /* ===== DOOR ICON – BACK TO HOME ===== */
    .door-hotspot{
      position: fixed;
      bottom: 28px;
      right: 32px;
      width: 76px;
      height: 76px;
      background-image: url("../assets/images/icon-door.png");
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      z-index: 20;
    }

    .door-hotspot::after{
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(255, 255, 255, 0.12);
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    @media (hover: hover){
      .door-hotspot:hover::after{
        opacity: 1;
        cursor: pointer;
      }
    }

    @media (max-width: 768px){
      .door-hotspot{
        width: 60px;
        height: 60px;
        bottom: 20px;
        right: 20px;
      }
    }

    /* ===== MODAL ===== */
    .modal{
      position: fixed;
      inset: 0;
      display: none;
      z-index: 999;
    }
    .modal.is-open{ display: block; }

    .modal-backdrop{
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.55);
    }

    .modal-panel{
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);

      width: min(1100px, calc(100vw - 28px));
      max-height: calc(100vh - 28px);

      background: #fff;
      border-radius: 0;
      overflow: hidden; /* pomembno: vse scroll se zgodi znotraj */
    }

    /* header z gumbi */
    .modal-topbar{
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 10px;
      border-bottom: 1px solid #eee;
      background: #fff;
    }

    .modal-topbar .spacer{
      width: 40px; /* da je naslov optično centriran */
    }

    .modal-titlebar{
      font-size: 1.05rem;
      font-weight: 600;
      margin: 0;
      text-align: center;
      flex: 1;
      padding: 0 10px;
      line-height: 1.2;
    }

    .icon-btn{
      border: 0;
      background: transparent;
      padding: 6px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .icon-btn img{
      width: 34px;
      height: 34px;
      display: block;
    }

    @media (max-width: 520px){
      .icon-btn img{ width: 30px; height: 30px; }
    }

    .icon-btn:focus{ outline: none; }
    .icon-btn:focus-visible{
      outline: 2px solid #111;
      outline-offset: 2px;
    }

    /* vsebina: desktop levo slika / desno podatki */
    .modal-content{
      display: flex;
      gap: 0;
      height: calc(100% - 56px); /* približek višine topbara */
    }

    .modal-media{
      flex: 0 0 58%;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 14px;
      box-sizing: border-box;
    }

    .modal-media img{
      width: 100%;
      height: auto;
      max-height: 62vh;          /* manjša slika = manj potrebe po scrollu */
      object-fit: contain;
      display: block;
    }

    .modal-body{
      flex: 0 0 42%;
      padding: 14px 14px 16px;
      box-sizing: border-box;

      /* če podatkov res veliko, naj se scrolla samo desna stran */
      overflow: auto;
      max-height: calc(100vh - 28px - 56px); /* okno - padding - topbar */
      background: #fff;
    }

    .meta{
      display: grid;
      grid-template-columns: 140px 1fr;
      column-gap: 12px;
      row-gap: 8px;
      font-size: 0.98rem;
      line-height: 1.35;
    }

    .meta .label{ opacity: 0.7; }
    .meta .value{ opacity: 0.95; }

    /* MOBILE: slika zgoraj, podatki spodaj */
    @media (max-width: 860px){
      .modal-content{
        flex-direction: column;
        height: auto;
        max-height: calc(100vh - 28px);
        overflow: auto; /* če je res potrebno */
      }

      .modal-media{
        flex: none;
        padding: 12px;
      }

      .modal-media img{
        max-height: 46vh; /* na mobile še malo manj, da ostane prostor za tekst */
      }

      .modal-body{
        flex: none;
        max-height: none;
        overflow: visible;
      }
    }
  </style>
</head>

<body>

  <header>
    <img src="../assets/images/icon-screen.png" alt="Animacija in oblikovanje" class="icon">
    <h1>Animacija in oblikovanje</h1>
  </header>

  <div class="grid-gallery">

    <!-- PROJEKT 1 -->
    <button class="project-card" type="button"
      data-title="Animacija 1"
      data-year="2024"
      data-duration="00:12"
      data-type="2D loop / motion design"
      data-tools="After Effects, Procreate"
      data-role="Ilustracija + animacija"
      data-notes="(po želji) Naročnik / format / kratke opombe…"
      data-media="../assets/images/animation1.jpg">
      <div class="project-inner">
        <img src="../assets/images/animation1.jpg" alt="Animacija 1" loading="lazy">
      </div>
    </button>

    <!-- PROJEKT 2 -->
    <button class="project-card" type="button"
      data-title="Animacija 2"
      data-year="2023"
      data-duration="01:10"
      data-type="Explainer / naslovni insert"
      data-tools="After Effects"
      data-role="Animacija"
      data-notes=""
      data-media="../assets/images/animation2.jpg">
      <div class="project-inner">
        <img src="../assets/images/animation2.jpg" alt="Animacija 2" loading="lazy">
      </div>
    </button>

    <!-- PROJEKT 3 -->
    <button class="project-card" type="button"
      data-title="Animacija 3"
      data-year="2022"
      data-duration="00:30"
      data-type="Motion design"
      data-tools="After Effects, Illustrator"
      data-role="Oblikovanje + animacija"
      data-notes=""
      data-media="../assets/images/animation3.jpg">
      <div class="project-inner">
        <img src="../assets/images/animation3.jpg" alt="Animacija 3" loading="lazy">
      </div>
    </button>

    <!-- PROJEKT 4 -->
    <button class="project-card" type="button"
      data-title="Animacija 4"
      data-year="2021"
      data-duration="00:08"
      data-type="2D loop"
      data-tools="Procreate"
      data-role="Ilustracija"
      data-notes=""
      data-media="../assets/images/animation4.jpg">
      <div class="project-inner">
        <img src="../assets/images/animation4.jpg" alt="Animacija 4" loading="lazy">
      </div>
    </button>

    <!-- PROJEKT 5 -->
    <button class="project-card" type="button"
      data-title="Animacija 5"
      data-year="2020"
      data-duration="00:15"
      data-type="Grafična špica"
      data-tools="After Effects"
      data-role="Animacija"
      data-notes=""
      data-media="../assets/images/animation5.jpg">
      <div class="project-inner">
        <img src="../assets/images/animation5.jpg" alt="Animacija 5" loading="lazy">
      </div>
    </button>

  </div>

  <a href="index.html" class="door-hotspot" aria-label="Nazaj na domačo stran"></a>

  <!-- MODAL -->
  <div class="modal" id="projectModal" aria-hidden="true">
    <div class="modal-backdrop" data-close="1"></div>

    <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="modalTitleTop">
      <!-- TOP BAR -->
      <div class="modal-topbar">
        <button class="icon-btn" type="button" id="prevBtn" aria-label="Prejšnji">
          <img src="../assets/images/icon-backward.png" alt="">
        </button>

        <h2 class="modal-titlebar" id="modalTitleTop"></h2>

        <button class="icon-btn" type="button" data-close="1" aria-label="Zapri">
          <img src="../assets/images/icon-exit.png" alt="">
        </button>
      </div>

      <!-- CONTENT -->
      <div class="modal-content">
        <div class="modal-media">
          <img id="modalImg" src="" alt="">
        </div>

        <div class="modal-body">
          <div class="meta">
            <div class="label">Leto</div><div class="value" id="mYear"></div>
            <div class="label">Dolžina</div><div class="value" id="mDuration"></div>
            <div class="label">Tip</div><div class="value" id="mType"></div>
            <div class="label">Programi</div><div class="value" id="mTools"></div>
            <div class="label">Vloga</div><div class="value" id="mRole"></div>
            <div class="label">Opombe</div><div class="value" id="mNotes"></div>
          </div>

          <!-- spodnji gumb samo za next (na desktopu je v topbaru že prev; to je “hitro” dno) -->
          <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:14px;">
            <button class="icon-btn" type="button" id="nextBtn" aria-label="Naslednji">
              <img src="../assets/images/icon-forward.png" alt="">
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
  (function(){
    const cards = Array.from(document.querySelectorAll('.project-card[data-media]'));
    const modal = document.getElementById('projectModal');
    const img = document.getElementById('modalImg');

    const titleTop = document.getElementById('modalTitleTop');

    const mYear = document.getElementById('mYear');
    const mDuration = document.getElementById('mDuration');
    const mType = document.getElementById('mType');
    const mTools = document.getElementById('mTools');
    const mRole = document.getElementById('mRole');
    const mNotes = document.getElementById('mNotes');

    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    if (!cards.length || !modal) return;

    let index = 0;

    function setText(el, value){
      el.textContent = (value && value.trim()) ? value : "—";
    }

    function openAt(i){
      index = (i + cards.length) % cards.length;
      const card = cards[index];

      img.src = card.dataset.media;
      img.alt = card.querySelector('img')?.alt || card.dataset.title || 'Projekt';

      titleTop.textContent = card.dataset.title || '';

      setText(mYear, card.dataset.year || '');
      setText(mDuration, card.dataset.duration || '');
      setText(mType, card.dataset.type || '');
      setText(mTools, card.dataset.tools || '');
      setText(mRole, card.dataset.role || '');
      setText(mNotes, card.dataset.notes || '');

      modal.classList.add('is-open');
      modal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }

    function close(){
      modal.classList.remove('is-open');
      modal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
      img.src = '';
    }

    cards.forEach((card, i) => {
      card.addEventListener('click', () => openAt(i));
    });

    prevBtn.addEventListener('click', () => openAt(index - 1));
    nextBtn.addEventListener('click', () => openAt(index + 1));

    modal.addEventListener('click', (e) => {
      if (e.target.dataset.close) close();
    });

    window.addEventListener('keydown', (e) => {
      if (!modal.classList.contains('is-open')) return;
      if (e.key === 'Escape') close();
      if (e.key === 'ArrowLeft') openAt(index - 1);
      if (e.key === 'ArrowRight') openAt(index + 1);
    });
  })();
  </script>

</body>
</html>
