<!DOCTYPE html>
<html lang="sl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Animacija in oblikovanje</title>

  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #fff;
      color: #222;
    }

    header {
      display: flex;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #ddd;
    }

    header img.icon {
      width: 60px;
      height: 60px;
      margin-right: 15px;
    }

    header h1 {
      font-size: 1.8rem;
      margin: 0;
    }

    /* ===== GALERIJA (thumbnaili ostanejo isti) ===== */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      padding: 20px;
    }

    .project-card{
      cursor:pointer;
      position:relative;
    }

    .gallery img {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s ease;
    }

    @media (hover:hover){
      .gallery img:hover {
        transform: scale(1.03);
      }
    }

    /* ===== DOOR ICON – HOTSPOT STYLE ===== */
    .door-hotspot {
      position: fixed;
      bottom: 28px;
      right: 32px;
      width: 64px;
      height: 64px;
      background-image: url("icon-door.png");
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      z-index: 20;
    }

    .door-hotspot::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(255, 255, 255, 0.12);
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    @media (hover: hover) {
      .door-hotspot:hover::after {
        opacity: 1;
        cursor: pointer;
      }
    }

    @media (max-width: 768px) {
      .door-hotspot {
        width: 48px;
        height: 48px;
        bottom: 20px;
        right: 20px;
      }
    }

    /* ===== MODAL ===== */
    .modal{ position:fixed; inset:0; display:none; z-index:999; }
    .modal.is-open{ display:block; }
    .modal-backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.45); }

    .modal-panel{
      position:absolute; left:50%; top:50%;
      transform:translate(-50%,-50%);
      width:min(1100px, calc(100vw - 48px));
      height: min(760px, calc(100vh - 40px));
      background:#fff;
      overflow:hidden;
      border-radius: 0;
    }

    .modal-controls{
      position:absolute; right:16px; bottom:16px;
      z-index:5; display:flex; align-items:center; gap:14px;
    }
    .modal-controls button{
      border:0; background:transparent; padding:6px; cursor:pointer;
      display:flex; align-items:center; justify-content:center;
    }
    .modal-controls svg{ width:36px; height:36px; display:block; }

    .modal-content{
      display:flex;
      height:100%;
    }

    /* LEVO: 2x2 mreža slik */
    .modal-media{
      flex:0 0 58%;
      padding:14px;
      box-sizing:border-box;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .media-grid{
      width:100%;
      height:100%;
      display:grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap:10px;
    }

    .media-tile{
      width:100%;
      height:100%;
      background:#f6f6f6;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .media-tile img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
    }

    /* DESNO: levo poravnano + vertikalno centrirano */
    .modal-body{
      flex:0 0 42%;
      padding:16px 18px 18px;
      box-sizing:border-box;
      background:#fff;
      overflow:hidden;
      display:flex;
      align-items:center;      /* center po višini */
      justify-content:center;  /* center po višini */
    }

    .meta-wrap{
      width: min(420px, 100%);
      text-align:left;
    }

    .meta-genre{
      font-size:.92rem;
      opacity:.72;
      margin: 0 0 12px;
      letter-spacing:.01em;
    }

    .meta-title{
      font-size:1.18rem;
      font-weight:600;
      margin: 0 0 18px;
    }

    .meta{
      display:grid;
      grid-template-columns: 120px 1fr;
      column-gap:12px;
      row-gap:10px;
      font-size:.98rem;
      line-height:1.25;
      align-items:start;
      text-align:left;
      margin:0;
    }
    .meta .label{ opacity:.65; }
    .meta .value{ opacity:.95; }

    /* opis brez labela */
    .desc{
      margin-top: 14px;
      font-size:.98rem;
      line-height:1.35;
      opacity:.95;
      text-align:left;
      display:-webkit-box;
      -webkit-line-clamp: 9;
      -webkit-box-orient: vertical;
      overflow:hidden;
    }

    @media (max-width: 900px){
      .modal-panel{
        width: calc(100vw - 18px);
        height: calc(100vh - 14px);
      }
      .modal-content{ flex-direction:column; }

      .modal-media{
        padding:10px;
        height: 44vh;
      }
      .modal-body{
        flex:1 1 auto;
        overflow:auto;
        padding: 12px 14px 84px;
        align-items:flex-start;
        justify-content:flex-start;
      }
      .desc{
        -webkit-line-clamp: unset;
        overflow: visible;
      }
      .modal-controls{ right:10px; bottom:10px; gap:12px; }
      .modal-controls svg{ width:32px; height:32px; }
      .meta{
        grid-template-columns: 1fr;
        row-gap: 4px;
      }
      .meta .label{ margin-top: 10px; }
    }
  </style>
</head>

<body>

  <header>
    <img src="icon-screen.png" alt="screen icon" class="icon">
    <h1>Animation &amp; Design</h1>
  </header>

  <!-- GALERIJA (pusti thumbnail slike kot jih imaš zdaj) -->
  <div class="gallery">

    <!--
      ✅ Za vsak projekt nastavi data-folder.
      Modal bo sam iskal 4 slike:
      ../assets/images/projects/<folder>/<folder>-01.jpg ... -04.jpg

      Primer:
      data-folder="design1" -> ../assets/images/projects/design1/design1-01.jpg ...
    -->

    <div class="project-card"
         data-category="design"
         data-folder="design1"
         data-title="Zemljevid goriškega bibliobusa"
         data-year="2026"
         data-type="grafično oblikovanje / ilustracija"
         data-client="GKFB"
         data-text=""
         data-duration=""
         data-role=""
         data-notes="Zemljevid je nastal kot del predstavitvenega / promocijskega filma o Goriški knjižnici Franceta Bevka.">
      <img src="project1.jpg" alt="Project 1">
    </div>

    <div class="project-card"
         data-category="animation"
         data-folder="animacija1"
         data-title="Jazon in Argonavti"
         data-year="2015"
         data-duration="3:44"
         data-role="Ilustracija, animacija, režija"
         data-type=""
         data-client=""
         data-text=""
         data-notes="Animacija govori o legendi Jazona in Argonavtov, kako so nekoč ustanovili mesto Ljubljana, takrat Emona.">
      <img src="project2.jpg" alt="Project 2">
    </div>

    <div class="project-card"
         data-category="design"
         data-folder="design10"
         data-title="Slikanica Gora v temi"
         data-year="2025"
         data-type="Ilustracija / grafično oblikovanje"
         data-client="ISPO d.o.o."
         data-text="Jakob J. Kenda"
         data-duration=""
         data-role=""
         data-notes="Slikanica, ki nagovarja vse Slovence, še posebej najstnike in njihove starše in jih vzpodbuja, da prehodijo vsaj del poti slovenske krožne Transverzale. Govori o zgodovini slovencev ter prikazuje ob pripovedi prikazuje z njo povezane ilustracije.">
      <img src="project3.jpg" alt="Project 3">
    </div>

    <!-- Dodaj več slik/projektov po potrebi -->
  </div>

  <a href="index.html" class="door-hotspot" aria-label="Back to home"></a>

  <!-- MODAL -->
  <div class="modal" id="projectModal" aria-hidden="true">
    <div class="modal-backdrop" id="modalBackdrop"></div>

    <div class="modal-panel" role="dialog" aria-modal="true" aria-label="Podrobnosti projekta">
      <div class="modal-controls">
        <button class="modal-prev" type="button" id="prevBtn" aria-label="Prejšnji">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M14.5 5l-7 7 7 7" stroke="#222" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>

        <button class="modal-next" type="button" id="nextBtn" aria-label="Naslednji">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M9.5 5l7 7-7 7" stroke="#222" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>

        <button class="modal-close" type="button" id="closeBtn" aria-label="Zapri">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 6l12 12" stroke="#222" stroke-width="2.6" stroke-linecap="round"/>
            <path d="M18 6L6 18" stroke="#222" stroke-width="2.6" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <div class="modal-content">
        <div class="modal-media">
          <div class="media-grid" id="mediaGrid">
            <div class="media-tile"><img id="mediaImg1" alt=""></div>
            <div class="media-tile"><img id="mediaImg2" alt=""></div>
            <div class="media-tile"><img id="mediaImg3" alt=""></div>
            <div class="media-tile"><img id="mediaImg4" alt=""></div>
          </div>
        </div>

        <div class="modal-body">
          <div class="meta-wrap">
            <p class="meta-genre" id="mGenre">—</p>
            <p class="meta-title" id="mTitleTop">—</p>

            <div class="meta">
              <div class="label">Leto</div><div class="value" id="mYear"></div>

              <div class="label" id="lblDuration">Dolžina</div><div class="value" id="mDuration"></div>

              <div class="label" id="lblType">Področje</div><div class="value" id="mType"></div>

              <div class="label" id="lblClient">Naročnik</div><div class="value" id="mClient"></div>

              <div class="label" id="lblText">Besedilo</div><div class="value" id="mText"></div>

              <div class="label" id="lblRole">Vloga</div><div class="value" id="mRole"></div>
            </div>

            <div class="desc" id="mNotes"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function () {
      // ✅ Ker je ta stran v /sl, moraš iti eno mapo gor do /assets
      const PROJECTS_BASE = '../assets/images/projects/';

      const modal = document.getElementById('projectModal');
      const backdrop = document.getElementById('modalBackdrop');
      const closeBtn = document.getElementById('closeBtn');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');

      const mGenre = document.getElementById('mGenre');
      const mTitleTop = document.getElementById('mTitleTop');
      const mYear = document.getElementById('mYear');
      const mDuration = document.getElementById('mDuration');
      const mType = document.getElementById('mType');
      const mClient = document.getElementById('mClient');
      const mText = document.getElementById('mText');
      const mRole = document.getElementById('mRole');
      const mNotes = document.getElementById('mNotes');

      const lblDuration = document.getElementById('lblDuration');
      const lblType = document.getElementById('lblType');
      const lblClient = document.getElementById('lblClient');
      const lblText = document.getElementById('lblText');
      const lblRole = document.getElementById('lblRole');

      const mediaGrid = document.getElementById('mediaGrid');
      const mediaImgs = [
        document.getElementById('mediaImg1'),
        document.getElementById('mediaImg2'),
        document.getElementById('mediaImg3'),
        document.getElementById('mediaImg4'),
      ];

      const cards = Array.from(document.querySelectorAll('.project-card'));
      let currentIndex = -1;

      function prettyGenre(cat){
        if (cat === 'animation') return 'Animacija';
        if (cat === 'design') return 'Oblikovanje';
        return '—';
      }

      function show(el, yes){
        el.style.display = yes ? '' : 'none';
      }

      function buildImagesFromFolder(folder){
        if (!folder) return [];
        const base = PROJECTS_BASE + folder + '/';
        return [
          base + folder + '-01.jpg',
          base + folder + '-02.jpg',
          base + folder + '-03.jpg',
          base + folder + '-04.jpg',
        ];
      }

      function fillMediaGridFromFolder(folder, title){
        const imgs = buildImagesFromFolder(folder);

        mediaGrid.style.gridTemplateColumns = '1fr 1fr';
        mediaGrid.style.gridTemplateRows = '1fr 1fr';

        for (let i = 0; i < 4; i++){
          const imgEl = mediaImgs[i];
          const tile = imgEl.closest('.media-tile');

          // reset handlers
          imgEl.onerror = null;

          if (!imgs[i]) {
            imgEl.removeAttribute('src');
            imgEl.alt = '';
            show(tile, false);
            continue;
          }

          imgEl.src = imgs[i];
          imgEl.alt = title || '';
          show(tile, true);

          // če datoteka ne obstaja, skrij tile
          imgEl.onerror = () => {
            imgEl.removeAttribute('src');
            imgEl.alt = '';
            show(tile, false);
          };
        }
      }

      function fillModalFromCard(card){
        const title = card.getAttribute('data-title') || '—';
        const year = card.getAttribute('data-year') || '—';
        const duration = card.getAttribute('data-duration') || '';
        const type = card.getAttribute('data-type') || '';
        const client = card.getAttribute('data-client') || '';
        const text = card.getAttribute('data-text') || '';
        const role = card.getAttribute('data-role') || '';
        const notes = card.getAttribute('data-notes') || '';
        const category = card.getAttribute('data-category') || '';
        const folder = card.getAttribute('data-folder') || '';

        mGenre.textContent = prettyGenre(category);
        mTitleTop.textContent = title;
        mYear.textContent = year;
        mNotes.textContent = notes;

        fillMediaGridFromFolder(folder, title);

        const isAnimation = category === 'animation';
        const isDesign = category === 'design';

        // Animacija: Dolžina + Vloga
        show(lblDuration, isAnimation);
        show(mDuration, isAnimation);
        show(lblRole, isAnimation);
        show(mRole, isAnimation);

        // Oblikovanje: Področje + Naročnik + (Besedilo samo, če obstaja)
        show(lblType, isDesign);
        show(mType, isDesign);
        show(lblClient, isDesign);
        show(mClient, isDesign);

        const showTextRow = isDesign && text.trim().length > 0;
        show(lblText, showTextRow);
        show(mText, showTextRow);

        if (isAnimation){
          mDuration.textContent = duration || '—';
          mRole.textContent = role || '—';
        } else {
          mDuration.textContent = '';
          mRole.textContent = '';
        }

        if (isDesign){
          mType.textContent = type || '—';
          mClient.textContent = client || '—';
        } else {
          mType.textContent = '';
          mClient.textContent = '';
        }

        mText.textContent = showTextRow ? text : '';
      }

      function openModal(index){
        currentIndex = index;
        fillModalFromCard(cards[currentIndex]);
        modal.classList.add('is-open');
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }

      function closeModal(){
        modal.classList.remove('is-open');
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        currentIndex = -1;
      }

      function showPrev(){
        if (currentIndex < 0) return;
        currentIndex = (currentIndex - 1 + cards.length) % cards.length;
        fillModalFromCard(cards[currentIndex]);
      }

      function showNext(){
        if (currentIndex < 0) return;
        currentIndex = (currentIndex + 1) % cards.length;
        fillModalFromCard(cards[currentIndex]);
      }

      cards.forEach((card, idx) => {
        card.addEventListener('click', () => openModal(idx));
        card.setAttribute('tabindex', '0');
        card.setAttribute('role', 'button');
        card.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            openModal(idx);
          }
        });
      });

      closeBtn.addEventListener('click', closeModal);
      backdrop.addEventListener('click', closeModal);

      prevBtn.addEventListener('click', showPrev);
      nextBtn.addEventListener('click', showNext);

      window.addEventListener('keydown', (e) => {
        if (!modal.classList.contains('is-open')) return;
        if (e.key === 'Escape') closeModal();
        if (e.key === 'ArrowLeft') showPrev();
        if (e.key === 'ArrowRight') showNext();
      });
    })();
  </script>
</body>
</html>
